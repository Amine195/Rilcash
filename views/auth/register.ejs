<% layout('layout/boilerplateAuth') -%>

<!-- Description -->
<article class="text-center">
    <h3 class="text-black-50 font-weight-bold mr-2">AGENCE</h3>
    <h3 class="text-black-50 font-weight-bold">IMMOBILIERE</h3>
    <p class="text-muted font-weight-bold mt-3 mb-0" style="font-size: 15px;">Inscrivez-vous à l'application rilcash</p>
    <p class="text-muted" style="font-size: 14px;">Créer un compte pour le voir en action</p>
    <i class="fas fa-sign-in-alt text-muted fa-2x"></i>
</article>

<!-- Main -->
<article class="container mt-3">
    <div class="row d-flex justify-content-center">
        <div class="col-xl-4 col-lg-4 col-md-6 col-sm-8 col-10">
            
            <!-- Formulaire -->
            <form class="needs-validation" action="/register" method="POST" novalidate>

                <!-- Family Name -->
                <div class="form-group mb-2">
                    <% if (validationErrors.find(e => e.param === 'familyName')) { %>
                        <small id="familyName" class="form-text text-muted red-text float-right animated shake mt-0">
                            <i class="fas fa-times-circle red-text mr-1"></i> <%= errorVM.familyName.msg %>
                        </small>
                    <% } %>
                    <input
                        class="form-control <%= validationErrors.find(e => e.param === 'familyName') ? 'invalid': '' %> mb-0"
                        type="text"
                        name="familyName"
                        id="familyName"
                        pattern="^[a-zA-Z]{4,}(?: [a-zA-Z]+){0,2}$"
                        value="<%= oldInput.familyName %>"
                        placeholder="Nom"
                        required
                    >
                </div>

                <!-- First Name -->
                <div class="form-group mb-2">
                    <% if (validationErrors.find(e => e.param === 'firstName')) { %>
                        <small id="firstName" class="form-text text-muted red-text float-right animated shake mt-0">
                            <i class="fas fa-times-circle red-text mr-1"></i> <%= errorVM.firstName.msg %>
                        </small>
                    <% } %>
                    <input
                        class="form-control <%= validationErrors.find(e => e.param === 'firstName') ? 'invalid': '' %> mb-0"
                        type="text"
                        name="firstName"
                        id="firstName"
                        pattern="^[a-zA-Z]{4,}(?: [a-zA-Z]+){0,2}$"
                        value="<%= oldInput.firstName %>"
                        placeholder="Prénom"
                        required
                    >
                </div>

                <!-- Téléphone -->
                <div class="form-group mb-2">
                    <% if (validationErrors.find(e => e.param === 'phone')) { %>
                        <small id="phone" class="form-text text-muted red-text float-right animated shake mt-0">
                            <i class="fas fa-times-circle red-text mr-1"></i> <%= errorVM.phone.msg %>
                        </small>
                    <% } %>
                    <input
                        class="form-control <%= validationErrors.find(e => e.param === 'phone') ? 'invalid': '' %> mb-0"
                        type="text"
                        name="phone"
                        id="phone"
                        pattern="^[0-9]{12}$"
                        value="<%= oldInput.phone %>"
                        placeholder="Téléphone"
                        required
                    >
                    <div class="invalid-feedback form-text text-red animated fadeInDown mt-0 ml-1" id="phone">
                        <i class="fas fa-times-circle red-text mr-1"></i> exp. 21356222431
                    </div>
                </div>

                <!-- Email -->
                <div class="form-group mb-2">
                    <% if (validationErrors.find(e => e.param === 'email')) { %>
                        <small id="email" class="form-text text-muted red-text float-right animated shake mt-0">
                            <i class="fas fa-times-circle red-text mr-1"></i> <%= errorVM.email.msg %>
                        </small>
                    <% } %>
                    <input
                        class="form-control <%= validationErrors.find(e => e.param === 'email') ? 'invalid': '' %> mb-0"
                        type="text"
                        name="email"
                        id="email"
                        pattern="^([a-z\d\.-]+)@([a-z\d-]+)\.([a-z]{2,8})(\.[a-z]{2,8})?$"
                        value="<%= oldInput.email %>"
                        placeholder="E-mail"
                        required
                    >
                </div>

                <!-- Password -->
                <div class="form-group mb-2">
                    <% if (validationErrors.find(e => e.param === 'password')) { %>
                        <small id="password" class="form-text text-muted red-text float-right animated shake mt-0">
                            <i class="fas fa-times-circle red-text mr-1"></i> <%= errorVM.password.msg %>
                        </small>
                    <% } %>
                    <input
                        class="form-control <%= validationErrors.find(e => e.param === 'password') ? 'invalid': '' %> mb-0"
                        type="password"
                        name="password"
                        id="password"
                        pattern="^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$"
                        placeholder="Mot de passe"
                        required
                    >
                    <div class="invalid-feedback form-text text-red animated fadeInDown mt-0 ml-1" id="password">
                        <i class="fas fa-times-circle red-text mr-1"></i> Alphanumérique, au moins 8 caractères
                    </div>
                </div>

                <!-- Confirmation password -->
                <div class="form-group" style="margin-bottom: 36px;">
                    <input
                        class="form-control <%= validationErrors.find(e => e.param === 'confirmPassword') ? 'invalid': '' %> mb-1"
                        type="password"
                        name="confirmPassword"
                        id="confirmPassword"
                        pattern="^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$"
                        placeholder="Confirmation Mot de passe"
                        required
                    >
                </div>

                <!-- Sign up button -->
                <input type="hidden" name="_csrf" value="<%= csrfToken %>">
                <button class="btn btn-block waves-effect py-2 mb-2" style="border: 1px solid #616161;" type="submit"><i class="far fa-check-circle mr-1"></i> Créer un nouveau compte</button>

            </form>

            <!-- Resend Code -->
            <div class="text-center">
                <a href="/resend" style="font-size:14px;"> Renvoyer le code d'activation</a>
            </div>

            <!-- Login -->
            <div class="text-center mt-4">
                <p class="text-muted mb-1" style="font-size: 14px;">Vous avez déjà un compte ?</p>
                <a href="/login" class="btn btn-block waves-effect text-muted py-2 pl-4 mt-0 mb-2"
                    style="border: 1px solid rgba(73, 80, 87, 0.5);">
                    <i class="fas fa-sign-in-alt mr-1"></i> Se connecter
                </a>
            </div>

        </div>
    </div>
</article>

<% block('footer').append('<script src="/js/formValidation/mdbValidation.js"></script>') %>